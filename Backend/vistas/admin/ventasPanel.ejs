<body id="pagina" data-bs-theme="light" style="transition: background-color 0.5s, color 0.5s;">
  <%- include('../partes/header') %>

  <div class="container mt-5 modoclarooscuro">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="mb-0">Panel de Ventas</h1>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="mb-0">Listado de Ventas</h2>
      <div>
        <a href="/admin/panelProductos" class="btn btn-outline-primary me-2">
          <i class="bi bi-arrow-left-circle"></i> Volver al Panel
        </a>
        <a href="/logout" class="btn btn-outline-danger">
          <i class="bi bi-box-arrow-right"></i> Cerrar Sesi√≥n
        </a>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark text-center">
          <tr>
            <th>ID Venta</th>
            <th>Cliente</th>
            <th>Productos</th>
            <th>Fecha</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          <% ventas.forEach(venta => { %>
            <tr>
              <td class="text-center"><%= venta.id %></td>
              <td><%= venta.Cliente.nombre %></td>
              <td>
                <div class="table-responsive">
                  <table class="table table-sm mb-0">
                    <thead class="table-light text-center">
                      <tr>
                        <th>Tipo</th>
                        <th>ID</th>
                        <th>Cant.</th>
                        <th>Subtotal</th>
                      </tr>
                    </thead>
                    <tbody>
                      <% venta.VentaProductos.forEach(prod => { %>
                        <tr class="text-center">
                          <td><%= prod.productoTipo %></td>
                          <td><%= prod.productoId %></td>
                          <td><%= prod.cantidad %></td>
                          <td>$<%= prod.subtotal.toFixed(2) %></td>
                        </tr>
                      <% }) %>
                    </tbody>
                  </table>
                </div>
              </td>
              <td class="text-center"><%= new Date(venta.createdAt).toLocaleString() %></td>
              <td class="text-end fw-bold text-success">$<%= venta.total.toFixed(2) %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  </div>
</body>
<%- include('../partes/footer') %>